•	To gather data you will need to first run CalibrationArduino on your Arduino. Make sure that the serial bus display is closed in Arduino ide (or possibly other ides) when the code is run.
•	Make sure Arduino is connected to the mag sensor and PC while code is running.
•	 In CalibrationMatlab folder you will see ArduinoDataCollection.
•	Open this matlab file.
•	dataAmount variable can be changed to adjust the sample size of data collected.
•	Run the code, a live window will pop up displaying current calibration position
•	Once the indicated amount is collected the software will stop collecting data
•	Data is stored in test.txt
•	If the program is ended prematurely serial will not be closed and will need to be closed manually by running closeSerial function (usually first thing to check is something doesn’t work)
•	Alternative synthetic data can be generated by matlab file sinthData without arduino (This data is written into sinthdata.txt) 
•	To process data use ArduinoDataProcessing3 (No need for Arduino now)
•	Get your local mag field from: https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml#igrfwmm
•	Total field in nano tesla needed with actual data
•	With sinth data 50 000 can be used
•	Use the field to give value to the variable localMag
•	Edit variable called textFile to the name of the file you want data to be used from (test.txt or sinthdata.txt)
•	ArduinoDataProcessing3 will generate 3 figures with the third being a sphere
•	If no sphere is generated something went wrong
•	The software also writes basing values needed into bias.txt
•	The hard iron bias needs to be minused from raw X Y and Z in arduino code
•	The soft iron array needs to be multiplied in a way that can be seen in some Arduino code 
•	eg
•	Xm_cal =  bias(1,1)*Xm_off + bias(1,2)*Ym_off + bias(1,3)*Zm_off; 
•	Ym_cal =  bias(2,1)*Xm_off + bias(2,2)*Ym_off + bias(2,3)*Zm_off; 
•	Zm_cal =  bias(3,1)*Xm_off + bias(3,2)*Ym_off + bias(3,3)*Zm_off; 
•	Where bias is soft iron matrix
•	These new bias values can be inputted into compassTestArduino 
•	While arduino is running compassTestArduino with new bias values ArduinoCompassRev2 matlab code can be run on your PC simultaneously to display compass heading
•	Same serial port rules apply (No serial port display and closeSerial must be tun manually)
•	Note: If arduino code designed to run parallel with matlab is to be run on its own; handshake with matlab inside arduino code void setup() needs to be commented out
